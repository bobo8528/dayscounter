<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Incident-Free Days</title>
  <link href="https://fonts.googleapis.com/css2?family=Red+Hat+Display:wght@400;700;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <!-- Dedicated container for digits -->
    <div class="digits-container">
      <div id="days-elapsed" class="digit-row"></div>
    </div>

    <!-- Separate container for text -->
    <div class="text-container">
      <div class="top-text">Incident Free Days</div>
      <div class="bottom-text">Together, let's make our workplace incident free!</div>
    </div>

    <!-- Reset button -->
    <button id="reset-btn" class="reset-btn">Reset Counter</button>
  </div>

  <!-- Password modal -->
  <div id="password-modal" class="modal">
    <div class="modal-content">
      <h2>Reset Counter</h2>
      <p>Enter password to reset the counter:</p>
      <input type="password" id="password-input" placeholder="Password">
      <div class="modal-buttons">
        <button id="confirm-reset">Confirm</button>
        <button id="cancel-reset">Cancel</button>
      </div>
    </div>
  </div>

  <script>
    // Store start date in localStorage
    function getStartDate() {
      const storedDate = localStorage.getItem('incidentFreeStartDate');
      return storedDate ? new Date(storedDate) : new Date("2025-07-06");
    }

    function setStartDate(date) {
      localStorage.setItem('incidentFreeStartDate', date.toISOString());
    }

    function updateCounter() {
      const startDate = getStartDate();
      const today = new Date();
      const daysElapsed = Math.floor((today - startDate) / (1000 * 60 * 60 * 24));
      const digits = daysElapsed.toString().split('');
      const container = document.getElementById("days-elapsed");
      
      container.innerHTML = digits.map(d => 
        `<span class="digit">${d}</span>`
      ).join('');
    }

    // Password protection
    const PASSWORD = "safety123"; // Change this to your desired password

    document.getElementById('reset-btn').addEventListener('click', () => {
      document.getElementById('password-modal').style.display = 'flex';
    });

    document.getElementById('cancel-reset').addEventListener('click', () => {
      document.getElementById('password-modal').style.display = 'none';
    });

    document.getElementById('confirm-reset').addEventListener('click', () => {
      const input = document.getElementById('password-input').value;
      if (input === PASSWORD) {
        setStartDate(new Date());
        updateCounter();
        document.getElementById('password-modal').style.display = 'none';
        document.getElementById('password-input').value = '';
        alert('Counter has been reset to today!');
      } else {
        alert('Incorrect password!');
      }
    });

    // Initialize
    updateCounter();
    setInterval(updateCounter, 86400000); // Refresh every 24 hours
  </script>
</body>
</html>